@page "/custWorkInfo"
@using BitTagDAL
@using BitTagModels
@using BitTagUser.CutomerServices;
@inject IOrgs org
@inject ICustomerWorkInfo custWorkinfo
<h3>CustomerWorkInfo</h3>

<EditForm Model="customerWorkInfo" OnSubmit="SaveCustWorkInfo">
    <label >Organization</label>
    @*<input type="text" @bind-value="vehicle.vehicleMake" /><br />*@
    <select onchange="SeletedOrgID">
        @foreach(var item in organizations)
        {
            <option value="@item.orgID">@item.orgName</option>
        }
    </select>

    <button type="submit">Save</button>
</EditForm>

@code {
    CustomerWorkInfoModel customerWorkInfo = new CustomerWorkInfoModel();
    List<CustomerWorkInfoModel> workinfos = new List<CustomerWorkInfoModel>();

    List<OrganizationModel> organizations = new List<OrganizationModel>();
    Guid orgId { get; set; }

    string userid = "3fa85f64-5717-4562-b3fc-2c963f66afad";
    private async void SaveCustWorkInfo()
    {
        customerWorkInfo.userID_FK = Guid.Parse(userid);
        customerWorkInfo.org_FK = orgId;
    }
    private async Task LoadData()
    {
        organizations = await org.Getorgs();
    }
    private void SeletedOrgID(ChangeEventArgs e)
    {
        orgId = Guid.Parse(e.Value.ToString());
    }
}
